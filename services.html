<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Services - MECHTech</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

<!-- NAVBAR -->
<header class="navbar">
  <div class="logo">
    <img src="new_logo1.png" alt="mechtech logo">
    <span>MECHTech</span>
  </div>
  <button class="nav-toggle" aria-label="Toggle menu">☰</button>
  <nav class="nav-links">
    <a href="index.html">Home</a>
    <a href="services.html">Services</a>
    <a href="booking.html">Booking</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
    <a href="login.html">Login</a>
  </nav>
</header>

<main class="services" style="padding-top:60px;">
  <h2>Our Services</h2>
  <p class="subtitle">Fast • Reliable • Professional</p>

  <div class="service-grid">
    <div class="service-card">
      <i class="fa-solid fa-car-burst"></i>
      <h3>Breakdown Repair</h3>
      <p>On-site diagnostics and repair to get you moving. Our expert mechanics can handle engine issues, electrical problems, and more right where you are.</p>
      <p><a class="btn btn-primary realistic" href="booking.html"><i class="fa-solid fa-car-burst breakdown-icon"></i><span>Breakdown Repairing</span></a></p>
    </div>

    <div class="service-card">
      <i class="fa-solid fa-car-battery"></i>
      <h3>Battery Jumpstart</h3>
      <p>Fast battery support and replacements. Dead battery? We'll jumpstart your car or provide a new battery installation on the spot.</p>
      <p><a class="btn btn-primary realistic" href="booking.html"><i class="fa-solid fa-battery-quarter"></i><span>Battery Support</span></a></p>
    </div>

    <div class="service-card">
      <i class="fa-solid fa-truck"></i>
      <h3>Towing Service</h3>
      <p>Safe towing to your preferred garage or location. 24/7 heavy vehicle support with professional drivers and proper equipment.</p>
      <p><a class="btn btn-primary realistic" href="booking.html"><i class="fa-solid fa-truck-arrow-right"></i><span>Book Towing</span></a></p>
    </div>

    <div class="service-card">
      <i class="fa-solid fa-screwdriver-wrench"></i>
      <h3>Tyre & Repair</h3>
      <p>Flat tyre fixes and roadside mechanical support. Puncture repair, tyre replacement, and quick fixes to get you back on road safely.</p>
      <p><a class="btn btn-primary realistic" href="booking.html"><i class="fa-solid fa-wrench"></i><span>Request Service</span></a></p>
    </div>
  </div>

  <!-- MECHANICS SECTION -->
  <section class="mechanics-section" style="margin-top: 60px;">
    <h2>Our Expert Mechanics</h2>
    <p class="subtitle">Meet our certified and experienced mechanics</p>
    <div id="mechanicsGrid" class="mechanics-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 30px;">
      <!-- Mechanics will be loaded here -->
    </div>
  </section>

  <!-- HOW OUR SERVICE WORKS -->
  <section class="how-works">
    <h2>How Our Service Works</h2>
    <div class="works-steps">
      <div class="work-step">
        <div class="step-num">1</div>
        <h4>Register</h4>
        <p>Register on MECHTech website and create your account in seconds. Add your vehicle details and emergency contacts.</p>
      </div>
      <div class="work-step">
        <div class="step-num">2</div>
        <h4>Request Service</h4>
        <p>Tell us your issue and location. Choose from available mechanics with ratings and pricing clearly displayed.</p>
      </div>
      <div class="work-step">
        <div class="step-num">3</div>
        <h4>Mechanic Arrives</h4>
        <p>Track your mechanic's arrival in real-time. They'll arrive equipped with tools and spare parts.</p>
      </div>
      <div class="work-step">
        <div class="step-num">4</div>
        <h4>Problem Solved</h4>
        <p>Get your vehicle fixed on-site or arrange for towing. Rate and review your experience instantly.</p>
      </div>
    </div>
  </section>

    <div style="margin-top:30px;text-align:center;">
    <a class="btn btn-primary realistic" href="booking.html" style="text-decoration:none;"><i class="fa-solid fa-phone-flip"></i><span>Book a Service</span></a>
  </div>
</main>

<footer>
  <img src="new_logo1.png" style="border-radius: 8px;" alt="MECHTech Logo">
  <p>© 2026 MECHTech. All rights reserved.</p>
</footer>

<!-- LOGIN MODAL -->
<div class="modal" id="loginModal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeLogin()">×</span>
    <h2 id="modalTitle">Login</h2>
     <input id="loginName" type="text" placeholder="Full Name" style="display:none;">

    <input id="loginEmail" type="email" placeholder="Email">

    <input id="loginPassword" type="password" placeholder="Password">
    <input id="loginConfirmPassword" type="password" placeholder="Confirm Password" style="display:none;">


    <button id="submitBtn" onclick="loginUser()">Login</button>

    <p id="toggleText" class="toggle-text">Don't have an account? <span onclick="toggleSignUp()" style="color:#2563eb; cursor:pointer; font-weight:600;">Sign Up</span></p>
  </div>
</div>

<script src="script.js"></script>
<script>
    // Load mechanics on page load
    document.addEventListener('DOMContentLoaded', async () => {
        await loadMechanics();
    });

    async function loadMechanics() {
        const mechanicsGrid = document.getElementById('mechanicsGrid');
        mechanicsGrid.innerHTML = '<div style="text-align: center; padding: 40px; grid-column: 1 / -1;"><i class="fas fa-spinner fa-spin" style="font-size: 24px; color: #667eea;"></i><br>Loading mechanics...</div>';

        try {
            const response = await fetch('http://localhost:5000/api/mechanics');
            const data = await response.json();

            if (response.ok && data.mechanics && data.mechanics.length > 0) {
                renderMechanics(data.mechanics);
            } else {
                mechanicsGrid.innerHTML = '<div style="text-align: center; padding: 40px; grid-column: 1 / -1; color: #64748b;"><i class="fas fa-users" style="font-size: 48px; margin-bottom: 16px;"></i><br>No mechanics available at the moment.</div>';
            }
        } catch (error) {
            console.error('Error loading mechanics:', error);
            mechanicsGrid.innerHTML = '<div style="text-align: center; padding: 40px; grid-column: 1 / -1; color: #ef4444;"><i class="fas fa-exclamation-triangle" style="font-size: 48px; margin-bottom: 16px;"></i><br>Unable to load mechanics. Please try again later.</div>';
        }
    }

    function renderMechanics(mechanics) {
        const mechanicsGrid = document.getElementById('mechanicsGrid');
        let html = '';

        mechanics.forEach(mechanic => {
            const rating = mechanic.rating || 5.0;
            const stars = '★'.repeat(Math.floor(rating)) + '☆'.repeat(5 - Math.floor(rating));

            html += `
                <div class="mechanic-card" style="background: white; border-radius: 12px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border: 1px solid #e2e8f0;">
                    <div style="display: flex; align-items: center; margin-bottom: 16px;">
                        <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; font-weight: bold; margin-right: 16px;">
                            ${mechanic.name.charAt(0).toUpperCase()}
                        </div>
                        <div>
                            <h3 style="margin: 0; font-size: 18px; font-weight: 600; color: #020617;">${mechanic.name}</h3>
                            <div style="color: #f59e0b; font-size: 16px; margin-top: 4px;">${stars} ${rating}</div>
                        </div>
                    </div>

                    <div style="margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <i class="fas fa-phone" style="color: #667eea; margin-right: 8px;"></i>
                            <span style="color: #64748b;">${mechanic.phone}</span>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <i class="fas fa-envelope" style="color: #667eea; margin-right: 8px;"></i>
                            <span style="color: #64748b;">${mechanic.email}</span>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <i class="fas fa-tools" style="color: #667eea; margin-right: 8px;"></i>
                            <span style="color: #64748b;">${mechanic.experience_years || 0} years experience</span>
                        </div>
                    </div>

                    <div style="margin-bottom: 16px;">
                        <h4 style="margin: 0 0 8px 0; font-size: 14px; font-weight: 600; color: #020617;">Specializations:</h4>
                        <p style="margin: 0; color: #64748b; font-size: 14px;">${mechanic.specializations || 'General repairs'}</p>
                    </div>

                    <button class="btn btn-primary realistic" style="width: 100%; padding: 10px;" onclick="bookWithMechanic('${mechanic.name}')">
                        <i class="fas fa-calendar"></i>
                        <span>Book Service</span>
                    </button>
                </div>
            `;
        });

        mechanicsGrid.innerHTML = html;
    }

    function bookWithMechanic(mechanicName) {
        // Store selected mechanic in localStorage for booking page
        localStorage.setItem('selectedMechanic', mechanicName);
        // Redirect to booking page
        window.location.href = 'booking.html';
    }
</script>
</body>
</html>
